<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/css/style.css">
    <title>Document</title>
</head>

<body>

    <%- include('../partials/header.ejs')%>

        <section id="mid">
            <div class="container">
                <div class="row">
                    <%- include('../partials/left.ejs')%>
                        <div class="col-md-9">
                            <h2 class="text-center mt-3 mb-4">Parking Details</h2>
                            <form action="" method="post">
                                <label for="">Vechile No.</label>
                                <select name="search" id="" class="form-select">
                                    <%Parked.forEach((result)=>{%>
                                        <option value="<%=result.vno%>"><%=result.vno%></option>
                                    <%})%>
                                </select>
                                <button type="submit" class="btn btn-outline-danger mt-2 mb-4 form-control">Search</button>
                            </form>
                            <table class="table table-hover">
                                <tr>
                                    <th>S.No</th>
                                    <th>Vechile No</th>
                                    <th>Vechile Type</th>
                                    <th>Vechile In Time</th>
                                    <th>Vechile Out Time</th>
                                    <th>Charged Amount</th>
                                    <th>Vechile Status</th>
                                    <th>Receipt</th>
                                    <th></th>
                                </tr>
                                <%record.forEach((result,key)=>{%>
                                    <tr>
                                        <td><%=key+1%></td>
                                        <td><%=result.vno%></td>
                                        <td><%=result.vtype%></td>
                                        <td><%=result.vin%></td>
                                        <td><%=result.vout%></td>
                                        <td><%=result.amount%></td>
                                        <%if(result.status==='OUT'){%>
                                            <td><a href="/parkedStatusUpdate/<%=result.id%>"><button disabled><%=result.status%></button></a></td>
                                        <%}else{%>
                                            <td><a href="/parkedStatusUpdate/<%=result.id%>"><button><%=result.status%></button></a></td>
                                        <%}%>

                                        <%if(result.status==='Parked'){%>
                                            <td><a href="/receipt/<%=result.id%>"><button disabled>Print</button></i></a></td>
                                        <%}else{%>
                                            <td><a href="/receipt/<%=result.id%>"><button>Print</button></i></a></td>
                                        <%}%>
                                        
                                        <td><a href="/delete/<%=result.id%>"><i class="bi bi-trash3"></i></a></td>
                                    </tr>
                                    <%})%>

                                    <%if(record.length===0){%>
                                        <tr>
                                            <th colspan="8" class="text-center"><h3>All Parking Slots are Empty</h3></th>
                                        </tr>
                                    <%}%>

                            </table>
                        </div>
                </div>
            </div>
        </section>

        <%- include('../partials/footer.ejs')%>

            <!-- ////////////////////This is bs script/////////////////////////////////// -->
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
                integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
                crossorigin="anonymous"></script>
</body>

</html>